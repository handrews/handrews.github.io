<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="../assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="../assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(5) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="../favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Referencing FAQ | OpenAPI Documentation</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Referencing FAQ" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:site_name" content="OpenAPI Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Referencing FAQ" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"For API designers and writers wishing formalize their API in an OpenAPI Description document.","headline":"Referencing FAQ","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/OpenAPI_Logo_Pantone-1.png"}},"url":"/referencing/faq.html"}</script> <!-- End Jekyll SEO tag --> <base target="_top"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> <style>.github-fork-ribbon:before { background-color: #1d781d; }</style> <a class="github-fork-ribbon" href="https://github.com/OAI/Documentation" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="../" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="OpenAPI Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="../introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The OpenAPI Specification Explained category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../specification/" class="nav-list-link">The OpenAPI Specification Explained</a><ul class="nav-list"><li class="nav-list-item"><a href="../specification/structure.html" class="nav-list-link">Structure of an OpenAPI Description</a></li><li class="nav-list-item"><a href="../specification/paths.html" class="nav-list-link">API Endpoints</a></li><li class="nav-list-item"><a href="../specification/content.html" class="nav-list-link">Content of Message Bodies</a></li><li class="nav-list-item"><a href="../specification/parameters.html" class="nav-list-link">Parameters and Payload of an Operation</a></li><li class="nav-list-item"><a href="../specification/components.html" class="nav-list-link">Reusing Description</a></li><li class="nav-list-item"><a href="../specification/docs.html" class="nav-list-link">Providing Documentation and Examples</a></li><li class="nav-list-item"><a href="../specification/servers.html" class="nav-list-link">API Servers</a></li></ul></li><li class="nav-list-item"><a href="../best-practices.html" class="nav-list-link">Best Practices</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Using References category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../referencing/" class="nav-list-link">Using References</a><ul class="nav-list"><li class="nav-list-item"><a href="../referencing/faq.html" class="nav-list-link">Referencing FAQ</a></li><li class="nav-list-item"><a href="../referencing/what.html" class="nav-list-link">What Are References?</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OpenAPI Documentation" aria-label="Search OpenAPI Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../referencing/">Using References</a></li> <li class="breadcrumb-nav-list-item"><span>Referencing FAQ</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="referencing-faq"> <a href="#referencing-faq" class="anchor-heading" aria-labelledby="referencing-faq"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Referencing FAQ </h1> <p>A few quick answers to common questions when using references with multi-document OpenAPI Descriptions (OADs).</p> <h2 id="is-it-possible-to-convert-all-oads-to-a-single-document-form-without-any-references"> <a href="#is-it-possible-to-convert-all-oads-to-a-single-document-form-without-any-references" class="anchor-heading" aria-labelledby="is-it-possible-to-convert-all-oads-to-a-single-document-form-without-any-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Is it possible to convert all OADs to a single-document form without any references? </h2> <p>The short answer is “no”, but there are many cases where it is possible to do such a thing. The difficult cases are:</p> <ul> <li>Cyclic references in JSON Schema <strong><em>cannot</em></strong> be removed, although if the references cross documents, it is possible to reduce them to same-document references in a single document</li> <li>While dynamic references in OAS 3.1 Schema Objects technically can be converted to static references, it can <a href="https://dl.acm.org/doi/10.1145/3632891">grow the schema size exponentially</a> (<a href="https://dl.acm.org/doi/pdf/10.1145/3632891">pdf</a>)</li> <li>OAS 3.1 Schema Objects, OAS 3.0 Reference Objects, and both OAS 3.0 and 3.1 Path Item Objects all allow keywords alongsidea<code class="language-plaintext highlighter-rouge">"$ref"</code>, each with slightly different semantics; generic reference removal tools, particularly ones that predate OAS 3.1, may fail to preserve the behavior while removing references</li> <li>In OAS 3.1 Schema Objects that use <code class="language-plaintext highlighter-rouge">"$id"</code>, reference removal tools that are not aware of <code class="language-plaintext highlighter-rouge">"$id"</code> will resolve references impacted by the <code class="language-plaintext highlighter-rouge">"$id"</code> incorrectly</li> <li>The Link Object’s <code class="language-plaintext highlighter-rouge">"operationRef"</code> cannot be replaced with an inline Operation Object (although if the target Operation Object has a unique-within-the-OAD <code class="language-plaintext highlighter-rouge">"operationId"</code>, then the <code class="language-plaintext highlighter-rouge">"operationRef"</code> can be replaced by the <code class="language-plaintext highlighter-rouge">"operationId"</code>)</li> <li>The Discriminator Object’s <code class="language-plaintext highlighter-rouge">"mapping"</code> field forbids inline Schema Objects; URI-reference values can be replaced with names from the <code class="language-plaintext highlighter-rouge">"schemas"</code> section of the Components Object, but when the Discriminator Object is in a referenced document, there are ambiguities involvied in how to resolve those names</li> <li>When using components published by 3rd parties such as standards organizations, tools might rely on reference URIs to identify standard components; while this usage is currently uncommon, it may become more common as OpenAPI is more broadly adopted by standards bodies</li> </ul> <p>If your OAD does not run afoul of any of the above difficulties, you <em>can</em> produce a reference-less single-document OAD, and there are <a href="https://tools.openapis.org">tools</a> that will do so (but see the caveats in the next section).</p> <h2 id="can-i-convert-my-multi-document-oad-into-a-single-document-even-if-i-cannot-remove-all-references"> <a href="#can-i-convert-my-multi-document-oad-into-a-single-document-even-if-i-cannot-remove-all-references" class="anchor-heading" aria-labelledby="can-i-convert-my-multi-document-oad-into-a-single-document-even-if-i-cannot-remove-all-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Can I convert my multi-document OAD into a single document, even if I cannot remove all references? </h2> <p>Yes. However, depending on exactly how your multi-document OAD is structured, this may be more complex than just removing references. Sadly, the reasons have to do with <a href="https://github.com/OAI/oascomply/blob/main/reports/processing-model-summary.md">painfully obscure and technical ambiguities</a> regarding how multi-document OADs are intended to be parsed. The OpenAPI Initiative hopes to clarify this in future versions of the specification.</p> <ul> <li>It is possible for a Link Object’s <code class="language-plaintext highlighter-rouge">"operationId"</code> to point to an Operation Object in a Path Item Object that is never referenced; it is unclear how this case should handle it, which is one reason the OAS itself <a href="https://spec.openapis.org/oas/v3.1.0#fixed-fields-16">advises against</a> using <code class="language-plaintext highlighter-rouge">"operationId"</code> in multi-document OADs</li> <li>Security Scheme Objects are never referenced, only named in Security Requirement Objects, and must be taken into account</li> <li>There is no standard place to put referenced Path Item Objects in OAS 3.0</li> <li>The resolution of server configuration and security settings can be unclear in multi-document OADs</li> </ul> <p>Again, in many cases none of this is a problem, and there are <a href="tools.openapis.org">tools</a> that will do what you want.</p> <h2 id="what-is-dynamic-referencing-and-would-i-use-it"> <a href="#what-is-dynamic-referencing-and-would-i-use-it" class="anchor-heading" aria-labelledby="what-is-dynamic-referencing-and-would-i-use-it"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is “dynamic referencing” and would I use it? </h2> <p>Dynamic referencing is a feature of JSON Schema draft 2020-12, and therefore included in OAS 3.1. It allows setting a placeholder reference target that can be overridden during validation depending on how the dynamic reference was reached. If that explanation didn’t help you at all, don’t worry, it boils down to two use cases:</p> <ul> <li><a href="https://json-schema.org/blog/posts/dynamicref-and-generics#using-dynamic-references-to-support-generic-types">Implementing generic types</a> (a.k.a. templatized types), such as container data structures or payload envelopes</li> <li>Extending recursive schemas, as the OAS schema needed to do to <a href="https://json-schema.org/blog/posts/validating-openapi-and-json-schema">add OAS-specific keywords to the standard JSON Schema dialect</a></li> </ul> <p>While there may be other creative ways to use dynamic references, these are the situations most likely to show up in API descriptions.</p> <h2 id="how-is-reference-resolution-different-from-reference-removal"> <a href="#how-is-reference-resolution-different-from-reference-removal" class="anchor-heading" aria-labelledby="how-is-reference-resolution-different-from-reference-removal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How is reference resolution different from reference removal? </h2> <p>A reference is said to be <em>resolved</em> within a tool if:</p> <ul> <li>Its target has been identified</li> <li>Any modifications to the target required by the OAS (e.g. because of fields adjacent to <code class="language-plaintext highlighter-rouge">"$ref"</code>) have been performed on a copy of the target</li> <li>The resulting target value has been associated with the reference source in some way that the tool can easily use when needed</li> </ul> <p>A reference is said to be <em>removed</em> if it has been replaced by its (possibly modified) target.</p> <p>Reference resolution usually preserves the referencing information such as the URI used to identify the target, while reference removal usually discards it. In many cases this is not significant, except that not knowing how the parsed OAD relates to the refernces in your JSON or YAML document may make debugging more difficult.</p> <p>While plain JSON documents form a <a href="https://en.wikipedia.org/wiki/Tree_%28data_structure%29">tree</a> structure, an OpenAPI Description with resolved references is not <em>necessarily</em> a tree, but a <a href="https://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29">graph</a>.</p> <p>Tools that resolve references in-memory and work with the graph structure can process all OADs. Tools that rely on reference removal, either as part of the tool or by a separate pre-processing tool, can only support OADs that form trees.</p> <h2 id="is-anything-being-done-to-reduce-this-complexity-in-future-openapi-specifications"> <a href="#is-anything-being-done-to-reduce-this-complexity-in-future-openapi-specifications" class="anchor-heading" aria-labelledby="is-anything-being-done-to-reduce-this-complexity-in-future-openapi-specifications"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Is anything being done to reduce this complexity in future OpenAPI Specifications? </h2> <p>Yes!</p> <p>The <a href="https://github.com/OAI/sig-moonwalk/discussions">Moonwalk project</a> is considering a different approach that imports complete documents, associates them with namespaces, and only supports referencing by component name (not <code class="language-plaintext highlighter-rouge">"$ref"</code>). A small example can be seen in the <a href="https://github.com/OAI/sig-moonwalk/blob/main/Deployments.md">Moonwalk deployments proposal</a>, and there are discussions around an <a href="https://github.com/OAI/sig-moonwalk/discussions/72">initial draft proposal for imports</a> and a few ideas on <a href="https://github.com/OAI/sig-moonwalk/discussions/73">how tomanage interactions with JSON Schema referencing</a>.</p> <p>The <a href="https://github.com/OAI/sig-workflows/blob/main/versions/1.0.0.md">proposed Workflows Specification</a> is already using a <code class="language-plaintext highlighter-rouge">"sourceDescription"</code> field that is not unlike the Moonwalk proposal.</p> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">© 2023 OpenAPI Initiative. <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The documentation is maintained in <a href="https://github.com/OAI/Documentation/">https://github.com/OAI/Documentation/</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
