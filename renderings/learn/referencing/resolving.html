<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css"> <style id="jtd-nav-activation"> .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list-link, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item:not(:nth-child(3)) > .nav-list-link, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item > .nav-list > .nav-list-item > .nav-list-link { background-image: none; } .site-nav > .nav-list:not(:nth-child(1):not(.nav-category-list)) .nav-list-link, .site-nav .nav-list-link.external { background-image: none; } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(6) > .nav-list > .nav-list-item:nth-child(3) > .nav-list-link { font-weight: 600; text-decoration: none; } .site-nav > .nav-category-list > .nav-list-item > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list > .nav-list-item:nth-child(3) > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-category-list > .nav-list-item > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list > .nav-list-item:nth-child(3) > .nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Resolving References | OpenAPI Documentation</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Resolving References" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <link rel="canonical" href="http://localhost:4000/referencing/resolving.html" /> <meta property="og:url" content="http://localhost:4000/referencing/resolving.html" /> <meta property="og:site_name" content="OpenAPI Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Resolving References" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"For API designers and writers wishing formalize their API in an OpenAPI Description document.","headline":"Resolving References","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/OpenAPI_Logo_Pantone-1.png"}},"url":"http://localhost:4000/referencing/resolving.html"}</script> <!-- End Jekyll SEO tag --> <base target="_top"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> <style>.github-fork-ribbon:before { background-color: #1d781d; }</style> <a class="github-fork-ribbon" href="https://github.com/OAI/Documentation" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="OpenAPI Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/definitions.html" class="nav-list-link">Definitions</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The OpenAPI Specification Explained category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/specification/" class="nav-list-link">The OpenAPI Specification Explained</a><ul class="nav-list"><li class="nav-list-item"><a href="/specification/structure.html" class="nav-list-link">Structure of an OpenAPI Document</a></li><li class="nav-list-item"><a href="/specification/paths.html" class="nav-list-link">API Endpoints</a></li><li class="nav-list-item"><a href="/specification/content.html" class="nav-list-link">Content of Message Bodies</a></li><li class="nav-list-item"><a href="/specification/parameters.html" class="nav-list-link">Parameters and Payload of an Operation</a></li><li class="nav-list-item"><a href="/specification/components.html" class="nav-list-link">Reusing Description</a></li><li class="nav-list-item"><a href="/specification/docs.html" class="nav-list-link">Providing Documentation and Examples</a></li><li class="nav-list-item"><a href="/specification/servers.html" class="nav-list-link">API Servers</a></li></ul></li><li class="nav-list-item"><a href="/best-practices.html" class="nav-list-link">Best Practices</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Using References category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/referencing/" class="nav-list-link">Using References</a><ul class="nav-list"><li class="nav-list-item"><a href="/referencing/faq.html" class="nav-list-link">Referencing FAQ</a></li><li class="nav-list-item"><a href="/referencing/what.html" class="nav-list-link">What Are References?</a></li><li class="nav-list-item"><a href="/referencing/resolving.html" class="nav-list-link">Resolving References</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OpenAPI Documentation" aria-label="Search OpenAPI Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/referencing/">Using References</a></li> <li class="breadcrumb-nav-list-item"><span>Resolving References</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="resolving-references"> <a href="#resolving-references" class="anchor-heading" aria-labelledby="resolving-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resolving References </h1> <p>The only difference between URIs and URLs is their intended usage: if a URI is intended to be used as a locator exactly as it is written, then it can be called a URL. API endpoints, for example, are URLs. If a URI is intended to be a stable identifier regardless of where the identified document actually lives, it is a URI, and <em>not</em> a URL.</p> <h2 id="resolving-internal-references"> <a href="#resolving-internal-references" class="anchor-heading" aria-labelledby="resolving-internal-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resolving internal references </h2> <p>References that consist only of URI fragments, or that have URIs whose non-fragment part resolves to the current document, are easily resolved. For JSON Pointer fragments (the only kind allowed in 3.0, and the only kind allowed outside of Schema Objects in 3.1), all that is needed is to evaluate the pointer against the document.</p> <h3 id="oas-31-schema-objects-and-internal-references"> <a href="#oas-31-schema-objects-and-internal-references" class="anchor-heading" aria-labelledby="oas-31-schema-objects-and-internal-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OAS 3.1 Schema Objects and internal references </h3> <h3 id="static-references-to-plain-name-uri-fragments"> <a href="#static-references-to-plain-name-uri-fragments" class="anchor-heading" aria-labelledby="static-references-to-plain-name-uri-fragments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Static references to plain-name URI fragments </h3> <p>With OAS 3.1 Schema Objects, it is also possible to use plain-name URI fragments in both static (<code class="language-plaintext highlighter-rouge">"$ref"</code>) and dynamic (<code class="language-plaintext highlighter-rouge">"$dynamicRef"</code>) references. Furthermore, it is possible to use <code class="language-plaintext highlighter-rouge">"$id"</code> to embed a Schema Object with a different <a href="https://www.rfc-editor.org/rfc/rfc3986#section-4.3">absolute-URI</a> from the overall document inside that document. While these references are still internal to the document, they require that the whole document has been parsed, and the keywords that declare the absolute-URIs (<code class="language-plaintext highlighter-rouge">"$id"</code>) or plain-name URI fragments (<code class="language-plaintext highlighter-rouge">"$anchor"</code> and <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code>) have been recognized.</p> <p>As we will see, these scenarios add complexity to resolving external references, as the correct document must be identified and parsed in full before the reference can be resolved.</p> <h3 id="dynamic-references"> <a href="#dynamic-references" class="anchor-heading" aria-labelledby="dynamic-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dynamic references </h3> <p>In the case of <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code> and <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code>, all schema documents containing Schema Objects with <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code> along the evaluation path (following <code class="language-plaintext highlighter-rouge">"$ref"</code> and <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> rather than the literal file structure) of any given instance validation must be parsed and recognized in order to properly resolve the <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> for that instance validation. Dynamic references cannot be fully resolved except in the context of instance evaluation/validation.</p> <p>This is true for both internal and external dynamic references. In particular, a <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> will always be statically resolvable (treating it like <code class="language-plaintext highlighter-rouge">"$ref"</code>) to a <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code> in the same document, making all <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code>s appear to be internal references. However, if the <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> is reached through any external documents on a particular evaluation path, then it will at least potentially function as an external reference.</p> <h2 id="resolving-external-references"> <a href="#resolving-external-references" class="anchor-heading" aria-labelledby="resolving-external-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resolving external references </h2> <p>External references, which are references with a target URI pointing to a different document than the one containing the reference, can be handled in several different ways. The OpenAPI Specification is not clear on the exact requirements, although the JSON Schema Specification makes it clear that references are done through <em>identifiers</em> (URIs) rather than <em>locators</em> (URLs) (<a href="https://datatracker.ietf.org/doc/html/draft-wright-json-schema-00#autoid-19">draft-wright-00</a> for OAS 3.0; <a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-00#section-8.2.3">draft-bhutton-00</a> for OAS 3.1).</p> <p>Not all tools support external references at all, and some that do only support handling them as URLs. This guide will examine different approaches, but check your tool documentation for what is supported in your environment.</p> <h3 id="treating-reference-uris-as-urls"> <a href="#treating-reference-uris-as-urls" class="anchor-heading" aria-labelledby="treating-reference-uris-as-urls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Treating reference URIs as URLs </h3> <p>The simplest way to resolve external references is to just treat the URIs as URLs. This works if either your OAD documents are always located in the same place, or if you can use relative URI-references to handle the difference between (for example) local check-outs of your files vs various development, testing, and production deployments.</p> <p>However, some use cases make treating reference identifiers as locators challenging:</p> <ul> <li>Maintaining both JSON and YAML formats, when using file extensions to differentiate them</li> <li>OADs that reference 3rd-party schemas from disparate sources</li> </ul> <h3 id="use-cases-for-separating-identity-uris-and-location-urls"> <a href="#use-cases-for-separating-identity-uris-and-location-urls" class="anchor-heading" aria-labelledby="use-cases-for-separating-identity-uris-and-location-urls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use cases for separating identity (URIs) and location (URLs) </h3> <p>There are many reasons to separate reference identity and location. This section will briefly list a few, while the next section will use an analogy to make the benefits more concrete for those who have only worked with relatively simple OpenAPI Descriptions (OADs).</p> <p>Note that the versions of JSON Schema referenced by OAS <a href="https://datatracker.ietf.org/doc/html/draft-wright-json-schema#section-8">3.0</a> and <a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-00#section-8.2.3">3.1</a> explicitly state that reference use URIs as identifiers, not necessarily locators.</p> <p>Tools that support separating reference identity and location provide various ways to map reference URIs to actual URLs to resolve the references. These interfaces vary widely, so check your tool’s documentation to determine what reference resolution configuration it supports.</p> <p>Use cases for mapping references to locations other than that given by their URI include:</p> <ul> <li>Abstracting JSON vs YAML representaitons by omitting any file extension (otherwise you need different reference values in each format, or you will change formats as you follow references which is allowed but may be surprising to users)</li> <li>Using an internal mirror of a 3rd-party schema repository in a high-security environment</li> <li>Managing references that are too complex to handle with relative URI-references alone, such as when you are mixing shared production schemas or other components with local development or tests schemas or components</li> </ul> <h3 id="an-analogy-with-programming-language-package-managers"> <a href="#an-analogy-with-programming-language-package-managers" class="anchor-heading" aria-labelledby="an-analogy-with-programming-language-package-managers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> An analogy with programming language package managers </h3> <p>TBD; see <a href="https://github.com/OAI/moonwalk/discussions/49#discussioncomment-6621150">OAI/moonwalk#49 (comment)</a> for a first pass at this example.</p> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">© 2023 OpenAPI Initiative. <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The documentation is maintained in <a href="https://github.com/OAI/Documentation/">https://github.com/OAI/Documentation/</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
