<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css"> <style id="jtd-nav-activation"> .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list-link, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item:not(:nth-child(1)) > .nav-list-link, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item > .nav-list > .nav-list-item > .nav-list-link { background-image: none; } .site-nav > .nav-list:not(:nth-child(1):not(.nav-category-list)) .nav-list-link, .site-nav .nav-list-link.external { background-image: none; } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(6) > .nav-list > .nav-list-item:nth-child(1) > .nav-list-link { font-weight: 600; text-decoration: none; } .site-nav > .nav-category-list > .nav-list-item > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list > .nav-list-item:nth-child(1) > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-category-list > .nav-list-item > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(6) > .nav-list > .nav-list-item:nth-child(1) > .nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Referencing FAQ | OpenAPI Documentation</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Referencing FAQ" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <link rel="canonical" href="http://localhost:4000/referencing/faq.html" /> <meta property="og:url" content="http://localhost:4000/referencing/faq.html" /> <meta property="og:site_name" content="OpenAPI Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Referencing FAQ" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"For API designers and writers wishing formalize their API in an OpenAPI Description document.","headline":"Referencing FAQ","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/OpenAPI_Logo_Pantone-1.png"}},"url":"http://localhost:4000/referencing/faq.html"}</script> <!-- End Jekyll SEO tag --> <base target="_top"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> <style>.github-fork-ribbon:before { background-color: #1d781d; }</style> <a class="github-fork-ribbon" href="https://github.com/OAI/Documentation" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="OpenAPI Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/definitions.html" class="nav-list-link">Definitions</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The OpenAPI Specification Explained category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/specification/" class="nav-list-link">The OpenAPI Specification Explained</a><ul class="nav-list"><li class="nav-list-item"><a href="/specification/structure.html" class="nav-list-link">Structure of an OpenAPI Document</a></li><li class="nav-list-item"><a href="/specification/paths.html" class="nav-list-link">API Endpoints</a></li><li class="nav-list-item"><a href="/specification/content.html" class="nav-list-link">Content of Message Bodies</a></li><li class="nav-list-item"><a href="/specification/parameters.html" class="nav-list-link">Parameters and Payload of an Operation</a></li><li class="nav-list-item"><a href="/specification/components.html" class="nav-list-link">Reusing Description</a></li><li class="nav-list-item"><a href="/specification/docs.html" class="nav-list-link">Providing Documentation and Examples</a></li><li class="nav-list-item"><a href="/specification/servers.html" class="nav-list-link">API Servers</a></li></ul></li><li class="nav-list-item"><a href="/best-practices.html" class="nav-list-link">Best Practices</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Using References category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/referencing/" class="nav-list-link">Using References</a><ul class="nav-list"><li class="nav-list-item"><a href="/referencing/faq.html" class="nav-list-link">Referencing FAQ</a></li><li class="nav-list-item"><a href="/referencing/what.html" class="nav-list-link">What Are References?</a></li><li class="nav-list-item"><a href="/referencing/resolving.html" class="nav-list-link">Resolving References</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OpenAPI Documentation" aria-label="Search OpenAPI Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/referencing/">Using References</a></li> <li class="breadcrumb-nav-list-item"><span>Referencing FAQ</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="referencing-faq"> <a href="#referencing-faq" class="anchor-heading" aria-labelledby="referencing-faq"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Referencing FAQ </h1> <h2 id="do-i-need-to-read-the-entire-referencing-guide"> <a href="#do-i-need-to-read-the-entire-referencing-guide" class="anchor-heading" aria-labelledby="do-i-need-to-read-the-entire-referencing-guide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Do I need to read the entire referencing guide? </h2> <p>If your OpenAPI Description (OAD):</p> <ol> <li>consists only of a single JSON or YAML document</li> <li>contains only references that are fragments (beginning with a <code class="language-plaintext highlighter-rouge">"#"</code>, e.g. <code class="language-plaintext highlighter-rouge">{"$ref": "#/components/responses/oops"}</code>)</li> <li>does not have any other keywords in the same object as any <code class="language-plaintext highlighter-rouge">"$ref"</code></li> <li>(OAS 3.1 only) does <em>not</em> use <code class="language-plaintext highlighter-rouge">"$id"</code>if you are using OAS 3.1, you are <em>not</em> using the <code class="language-plaintext highlighter-rouge">"$id"</code> keyword Schema Objects</li> <li>(OAS 3.1 only) does <em>not</em> use <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> or <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code></li> </ol> <p>Then your use of references is simple enough that your references will do what you expect with any tool that supports them at all. You probably do not need to read the rest of this page.</p> <h2 id="can-an-oad-be-completely-de-referenced-by-removing-all-references"> <a href="#can-an-oad-be-completely-de-referenced-by-removing-all-references" class="anchor-heading" aria-labelledby="can-an-oad-be-completely-de-referenced-by-removing-all-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Can an OAD be <em>completely</em> “de-referenced” by “removing” all references? </h2> <p>In general, no. But in many common cases, yes, and tools exist that will attempt this.</p> <p>There are two types of reasons why de-referenceing might not be possible:</p> <ul> <li>Technical reasons: <ul> <li>Cyclic references are allowed in Schema Objects, and are used to describe recursive tree structures. JSON Schema itself is a recursive tree structure, so the JSON Schema metaschemas cannot be fully de-referenced (see draft-07 or earlier for how this works with <code class="language-plaintext highlighter-rouge">"$ref"</code>; draft 2020-12 uses a different technique)</li> <li>Cyclic references can also occur when describing complex payloads such as <code class="language-plaintext highlighter-rouge">multipart/form-data</code> where media type descriptions can be nested</li> <li>References in Link Objects (<code class="language-plaintext highlighter-rouge">"operationRef"</code>) and Discriminator Objects (<code class="language-plaintext highlighter-rouge">"mapping"</code>) cannot be replaced with literal values, although there are alternatives to using references in these cases (<code class="language-plaintext highlighter-rouge">"operationId"</code> and mapping by schema component name, respectively, althouogh there can be challenges with arranging the documents properly for those techniques as well)</li> <li>Dynamic references in OAS 3.1 (which are not covered in detail by this guide) have runtime behavior which cannot always be predicted ahead of time</li> </ul> </li> <li>Social reasons: <ul> <li>In large-scale API ecosystems, different parts of an API may be owned by different entities and connected by references</li> <li>Independent deployment of different parts of the API and different documents within the OpenAPI Description may make de-referencing impossible, or at least very fragile</li> <li>Security or other policies may forbid the sort of copying necessary to perform de-referencing; this is most likely to happen in high-security environments such as government or military</li> <li>Standards compliance policies might require referencing the OAD or schema published by a standards body, rather than copying it</li> </ul> </li> </ul> <h2 id="can-an-oad-at-least-be-de-referenced-to-a-single-document"> <a href="#can-an-oad-at-least-be-de-referenced-to-a-single-document" class="anchor-heading" aria-labelledby="can-an-oad-at-least-be-de-referenced-to-a-single-document"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Can an OAD at least be de-referenced to a single document? </h2> <p>Technically, yes, although in some cases this is more complex than it may seem:</p> <p>The following sorts of references cannot be removed and replaced with their (possibly modified, depending on the OAS version an source object) targets. In some cases an alternate technique can be used, while in others the reference value must be updated to reflect the structure of the single consolidated document:</p> <ul> <li>cyclic references</li> <li><code class="language-plaintext highlighter-rouge">"operationRef"</code> in Link Objects (although if <code class="language-plaintext highlighter-rouge">"operationId"</code>s are managed carefully, <code class="language-plaintext highlighter-rouge">"operationRef"</code> can be replaced by <code class="language-plaintext highlighter-rouge">"operationId"</code>)</li> <li><code class="language-plaintext highlighter-rouge">"mapping"</code> in Discriminator Objects (although URI-reference values can be replaced with names from the Components Object if handled correctly)</li> </ul> <p>Dynamic references, which are outside the scope of this guide, may need even more complex handling to be preserved in a single-document structure.</p> <p>For OAS 3.1, note that if the <code class="language-plaintext highlighter-rouge">"$id"</code> keyword is used, tools must be aware of it to successfully perform de-referencing, so check your tool’s documentation carefully. For an example of using <code class="language-plaintext highlighter-rouge">"$id"</code> in a technique known as “bundling”, see the OpenAPI Blog post <a href="https://www.openapis.org/blog/2021/08/23/json-schema-bundling-finally-formalised">JSON Schema bundling finally formalised</a>.</p> <p>However, keep in mind that there are other, non-technical reasons why de-referencing may not be feasible.</p> <p><em>De-referencing is not a general solution in large-scale API ecosystems.</em></p> <h2 id="how-is-reference-resolution-different-from-de-referencing"> <a href="#how-is-reference-resolution-different-from-de-referencing" class="anchor-heading" aria-labelledby="how-is-reference-resolution-different-from-de-referencing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How is reference “resolution” different from “de-referencing”? </h2> <p>A reference is said to be <em>resolved</em> within a tool if:</p> <ul> <li>Its target has been identified</li> <li>Any modifications to the target required by the OAS have been performed</li> <li>The resulting value has been associated with the reference source in some way that the tool can easily use when needed</li> </ul> <p>While plain JSON documents form a <a href="https://en.wikipedia.org/wiki/Tree_%28data_structure%29">tree</a> structure, an OpenAPI Description with resolved references is not a tree, but a <a href="https://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29">graph</a>.</p> <h2 id="do-i-need-to-understand-dynamic-references"> <a href="#do-i-need-to-understand-dynamic-references" class="anchor-heading" aria-labelledby="do-i-need-to-understand-dynamic-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Do I need to understand dynamic references? </h2> <p>This guide does <strong>not</strong> cover OAS 3.1 / JSON Schema draft 2020-12’s dynamic references (<code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> and <code class="language-plaintext highlighter-rouge">"$dynamicAnchor"</code>). Dynamic references seve a different purpose than discussed here. The following JSON Schema Blog posts explain some uses of dynamic references and anchors:</p> <ul> <li><a href="https://json-schema.org/blog/posts/dynamicref-and-generics#using-dynamic-references-to-support-generic-types">Using Dynamic References to Support Generic Types</a></li> <li><a href="https://json-schema.org/blog/posts/validating-openapi-and-json-schema">Validating OpenAPI and JSON Schema</a></li> </ul> <p>Note that in some cases, <code class="language-plaintext highlighter-rouge">"$dynamicRef"</code> cannot be removed or de-referenced, as it will evaluate differently depending on how it is reached at runtime.</p> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">© 2023 OpenAPI Initiative. <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The documentation is maintained in <a href="https://github.com/OAI/Documentation/">https://github.com/OAI/Documentation/</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
