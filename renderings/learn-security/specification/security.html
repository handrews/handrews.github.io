<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(8)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(8) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(8) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(8) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Describing API Security | OpenAPI Documentation</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Describing API Security" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:description" content="For API designers and writers wishing formalize their API in an OpenAPI Description document." /> <meta property="og:site_name" content="OpenAPI Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Describing API Security" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"For API designers and writers wishing formalize their API in an OpenAPI Description document.","headline":"Describing API Security","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/OpenAPI_Logo_Pantone-1.png"}},"url":"/specification/security.html"}</script> <!-- End Jekyll SEO tag --> <base target="_top"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> <style>.github-fork-ribbon:before { background-color: #1d781d; }</style> <a class="github-fork-ribbon" href="https://github.com/OAI/Documentation" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="OpenAPI Documentation"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in The OpenAPI Specification Explained category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/specification/" class="nav-list-link">The OpenAPI Specification Explained</a><ul class="nav-list"><li class="nav-list-item"><a href="/specification/structure.html" class="nav-list-link">Structure of an OpenAPI Description</a></li><li class="nav-list-item"><a href="/specification/paths.html" class="nav-list-link">API Endpoints</a></li><li class="nav-list-item"><a href="/specification/content.html" class="nav-list-link">Content of Message Bodies</a></li><li class="nav-list-item"><a href="/specification/parameters.html" class="nav-list-link">Parameters and Payload of an Operation</a></li><li class="nav-list-item"><a href="/specification/components.html" class="nav-list-link">Reusing Description</a></li><li class="nav-list-item"><a href="/specification/docs.html" class="nav-list-link">Providing Documentation and Examples</a></li><li class="nav-list-item"><a href="/specification/servers.html" class="nav-list-link">API Servers</a></li><li class="nav-list-item"><a href="/specification/security.html" class="nav-list-link">Describing API Security</a></li></ul></li><li class="nav-list-item"><a href="/best-practices.html" class="nav-list-link">Best Practices</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OpenAPI Documentation" aria-label="Search OpenAPI Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/specification/">The OpenAPI Specification Explained</a></li> <li class="breadcrumb-nav-list-item"><span>Describing API Security</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="describing-api-security"> <a href="#describing-api-security" class="anchor-heading" aria-labelledby="describing-api-security"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Describing API Security </h1> <p>One feature of OpenAPI that can prove useful to API providers and consumers is the means to describe API security. Providing information about the security that protects a given API and its Operations is useful to humans, as they can understand security restrictions and account for them in their implementation, and for tooling that can generate code or provide features that facilitate submitting authorization parameters.</p> <p>OpenAPI provides the <a href="https://spec.openapis.org/oas/latest.html#security-scheme-object">Security Scheme Object</a>, which contains security definitions that can be referenced either globally or per <a href="https://spec.openapis.org/oas/v3.1.0#operation-object">Operation</a>. Unlike other Component objects, Security Scheme objects are referenced by name using a <a href="https://spec.openapis.org/oas/latest.html#security-requirement-object">Security Requirement Object</a>. A security description for a given API or Operation therefore <strong>must</strong> be defined as a Security Scheme Object as they cannot be declared inline.</p> <figure style="text-align:center"> <object type="image/svg+xml" data="//img/security-object.svg"></object> <figcaption>Security Scheme objects are referenced as Security Requirements, either <a href="structure.html#minimal-openapi-description-structure">globally</a> or by an <a href="paths.html#the-operation-object">Operation</a>.</figcaption> </figure> <p>A Security Requirement declared for a given Operation takes precedence over global Security Requirements. A number of security mechanisms are supported. Each mechanism is indicated using the <code class="language-plaintext highlighter-rouge">type</code> property, which is shown in the examples below.</p> <p>There is currently five supported security types, namely:</p> <ul> <li>API Keys</li> <li>HTTP Authentication</li> <li>Mutual TLS</li> <li>OAuth 2.0</li> <li>OpenID Connect</li> </ul> <p>Each is discussed in the sections below.</p> <h2 id="api-keys"> <a href="#api-keys" class="anchor-heading" aria-labelledby="api-keys"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API Keys </h2> <p>An API key is - generally speaking - the API equivalent of a password and is used to supply a secret known only by a given API consumer and the API provider. There are no formal standards that govern API keys and the industry generally relies on accepted best practices for their definition. OpenAPI therefore provides flexibility in how they are defined.</p> <p>For example, an API provider might use the HTTP header <code class="language-plaintext highlighter-rouge">api-key</code> as the means for API consumers to send their API keys with each request. A Security Scheme object can be defined to indicate in which HTTP header the API Key should be sent:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">components</span><span class="pi">:</span>
  <span class="na">securitySchemes</span><span class="pi">:</span>
    <span class="na">defaultApiKey</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">API key provided in console</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">apiKey</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">api-key</span>
      <span class="na">in</span><span class="pi">:</span> <span class="s">header</span>
</code></pre></div></div> <p>The API provider can then use the name of this Scheme Scheme object to apply security either globally or for a given Operation (both are shown below for the sake of exemplar):</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.1.0</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Tic Tac Toe</span>
  <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">This API allows writing down marks on a Tic Tac Toe board</span>
    <span class="s">and requesting the state of the board or of individual squares.</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
<span class="na">security</span><span class="pi">:</span>
  <span class="na">defaultApiKey</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/board</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">security</span><span class="pi">:</span>
        <span class="na">defaultApiKey</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div> <p>This method of referencing Security Scheme objects is valid for all types. The array shown as the value of <code class="language-plaintext highlighter-rouge">defaultApiKey</code> above is populated for OAuth Flow and OpenID Connect objects, which have some additional features that are discussed below. In all other cases an empty array is provided.</p> <h2 id="http-authentication"> <a href="#http-authentication" class="anchor-heading" aria-labelledby="http-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> HTTP Authentication </h2> <p>OpenAPI supports HTTP Authentication as defined in RFC7235, which implements the <a href="https://httpwg.org/specs/rfc7235.html#header.authorization"><code class="language-plaintext highlighter-rouge">Authorization</code></a> header as the means to send both the authorization scheme identifier and the parameter in the format <code class="language-plaintext highlighter-rouge">Authorization: Basic b3BlbmFwaTppc2dyZWF0</code>. The authorization scheme <em>should</em> be defined in the <a href="https://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml">IANA registry for HTTP Authentication</a>, but API providers can extend this to use custom values if required.</p> <p>The example below shows a Security Scheme object that specifies both Basic Authentication and Bearer tokens. The Bearer token example includes an additional hint, the <code class="language-plaintext highlighter-rouge">bearerFormat</code> property, that gives the API consumer additional information on format of the token (in this case a <a href="https://datatracker.ietf.org/doc/html/rfc7519">JSON Web Token</a> or JWT).</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">components</span><span class="pi">:</span>
  <span class="na">securitySchemes</span><span class="pi">:</span>
    <span class="na">basicHttpAuthentication</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Basic HTTP Authentication</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">http</span>
      <span class="na">scheme</span><span class="pi">:</span> <span class="s">Basic</span>
    <span class="na">bearerHttpAuthentication</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Bearer token using a JWT</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">http</span>
      <span class="na">scheme</span><span class="pi">:</span> <span class="s">Bearer</span>
      <span class="na">bearerFormat</span><span class="pi">:</span> <span class="s">JWT</span>
</code></pre></div></div> <p>You’ll note that in both cases the information provided is relatively terse. OpenAPI provides enough information to give humans and tooling the means to understand the basic security requirements, but deployment information such as onboarding or key exchange is out-of-scope.</p> <h2 id="mutual-tls"> <a href="#mutual-tls" class="anchor-heading" aria-labelledby="mutual-tls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mutual TLS </h2> <p>Mutual authentication over TLS (mTLS) is a very common API security approach in verticals such as financial services. This is due to its enhanced security posture through authentication of the HTTP Client at the transport layer.</p> <p>Defining mTLS in OpenAPI is very simple:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">mutualTLS</span>
</code></pre></div></div> <p>As before the information provided is terse. Establishing the private key infrastructure used to govern communications between the API provider and consumer, together with the associated deployment information such as certificate signing and so on, is beyond the scope of OpenAPI.</p> <h2 id="oauth-20"> <a href="#oauth-20" class="anchor-heading" aria-labelledby="oauth-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OAuth 2.0 </h2> <p>OAuth 2.0 is a very popular authorization framework in the API world due to its support for delegated access without giving up End Users credentials to an untrusted application. It is described using a specific object, namely the <a href="https://spec.openapis.org/oas/latest.html#oauth-flows-object">OAuth Flows Object</a>. This object is provided due to the relative complexity of the protocol compared to other security types, with different grant types representing different mechanisms for obtaining authorization to access protected resources.</p> <p>The OAuth Flows Object has properties representing the different OAuth 2.0 grant types, each of which references the <a href="https://spec.openapis.org/oas/latest.html#oauth-flow-object">OAuth Flow Object</a>. The OAuth Flow Object properties describe the Authorization Server URL, Token Endpoint and optionally the permitted OAuth scopes.</p> <p>The example below shows the properties for the Client Credentials and Authorization Code grant types:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">components</span><span class="pi">:</span>
  <span class="na">securitySchemes</span><span class="pi">:</span>
    <span class="na">oauth2Profiles</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">oauth2</span>
      <span class="na">flows</span><span class="pi">:</span>
        <span class="na">clientCredentials</span><span class="pi">:</span>
          <span class="na">tokenUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/token</span>
          <span class="na">scopes</span><span class="pi">:</span>
            <span class="s">board:read: Read the board</span>
            <span class="s">board:write: Write to the board</span>
        <span class="na">authorizationCode</span><span class="pi">:</span>
          <span class="na">authorizationUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/auth</span>
          <span class="na">tokenUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/token</span>
          <span class="na">scopes</span><span class="pi">:</span>
            <span class="s">board:read: Read the board</span>
            <span class="s">board:write: Write to the board</span>
</code></pre></div></div> <p>These can then be applied globally or for a given Operation, with a list of required scopes:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.1.0</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Tic Tac Toe</span>
  <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">This API allows writing down marks on a Tic Tac Toe board</span>
    <span class="s">and requesting the state of the board or of individual squares.</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
<span class="na">security</span><span class="pi">:</span>
  <span class="na">oauth2Profiles</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">board:read</span>
    <span class="pi">-</span> <span class="s">board:write</span>
<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/board</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">security</span><span class="pi">:</span>
        <span class="na">oauth2Profiles</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div> <p>Note that if you want to segregate grant types - where, for example, Client Credentials is only supported for a specific Operation - you’ll need to create a separate Security Scheme object that can be applied individually. This is also true if you want to differentiate the available scopes, for example:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">components</span><span class="pi">:</span>
  <span class="na">securitySchemes</span><span class="pi">:</span>
    <span class="na">app2AppOauth</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">oauth2</span>
      <span class="na">flows</span><span class="pi">:</span>
        <span class="na">clientCredentials</span><span class="pi">:</span>
          <span class="na">tokenUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/token</span>
            <span class="s"># Only reading the board allow with delegated access</span>
            <span class="s">board:read: Read the board</span>
    <span class="na">user2AppOauth</span><span class="pi">:</span>
        <span class="na">authorizationCode</span><span class="pi">:</span>
          <span class="na">authorizationUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/auth</span>
          <span class="na">tokenUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/oauth/2.0/token</span>
          <span class="na">scopes</span><span class="pi">:</span>
            <span class="c1"># Reads and writes permitted via authorization code flow</span>
            <span class="s">board:read: Read the board</span>
            <span class="s">board:write: Write to the board</span>
</code></pre></div></div> <p>These then be declared as separate Security Requirements:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Tic Tac Toe</span>
  <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">This API allows writing down marks on a Tic Tac Toe board</span>
    <span class="s">and requesting the state of the board or of individual squares.</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>

<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/board</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">security</span><span class="pi">:</span>
        <span class="na">app2AppOauth</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">board:read</span>
      <span class="s">...</span>
  <span class="s">/board/{row}/{column}</span><span class="err">:</span>
    <span class="na">put</span><span class="pi">:</span>
      <span class="na">security</span><span class="pi">:</span>
        <span class="na">user2AppOauth</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">board:read</span>
        <span class="pi">-</span> <span class="s">board:write</span>
      <span class="s">...</span>
</code></pre></div></div> <blockquote> <p>Please refer to our <a href="../examples/tictactoe.yaml">example OpenAPI document</a> for the complete example.</p> </blockquote> <h2 id="openid-connect"> <a href="#openid-connect" class="anchor-heading" aria-labelledby="openid-connect"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OpenID Connect </h2> <p>The final Security Scheme type is OpenID Connect, which provides information for <a href="https://openid.net/specs/openid-connect-discovery-1_0.html">OpenID Connect Discovery</a>.</p> <p>OpenID Connect Core is obviously an OAuth 2.0 profile and is supported by some of properties the OAuth Flow Object. However, OpenID Connect is generally more complex than plain OAuth 2.0 and given OpenID Connect Discovery provides a machine-readable format at the discovery endpoint it makes sense to outsource this functionality entirely.</p> <p>Specifying OpenID Connect is therefore straightforward in that you provide the discovery endpoint in the property <code class="language-plaintext highlighter-rouge">openIdConnectUrl</code>:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">components</span><span class="pi">:</span>
  <span class="na">securitySchemes</span><span class="pi">:</span>
    <span class="na">openIdConnect</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">openIdConnect</span>
      <span class="na">openIdConnectUrl</span><span class="pi">:</span> <span class="s">https://learn.openapis.org/.well-known/openid-configuration</span>
</code></pre></div></div> <p>The neat trick here is that <strong><em>you do not need to declare scopes in your OpenAPI document</em></strong>. You can specify scopes in your discovery endpoint, and then use them in your OpenAPI document with the expectation that compatible tooling will have parsed and read them:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.1.0</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Tic Tac Toe</span>
  <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">This API allows writing down marks on a Tic Tac Toe board</span>
    <span class="s">and requesting the state of the board or of individual squares.</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
<span class="na">security</span><span class="pi">:</span>
  <span class="na">openIdConnect</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">board:read</span>
    <span class="pi">-</span> <span class="s">board:write</span>
</code></pre></div></div> <p>This approach allows OpenAPI to provide <em>just enough</em> information for humans and tooling, whilst ensuring that OpenID Connect Discovery provides the system-or-record for security-related information.</p> <h2 id="summary"> <a href="#summary" class="anchor-heading" aria-labelledby="summary"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Summary </h2> <p>In this page we’ve learnt that:</p> <ul> <li>API security can be described in OpenAPI.</li> <li>Security properties must be described using a Security Scheme object.</li> <li>A Security Scheme object is referenced either globally or for a given Operation using a Security Requirement.</li> <li>OpenAPI supports a number of built-in security types, with different properties dependent on the type.</li> </ul> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">© 2023 OpenAPI Initiative. <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. The documentation is maintained in <a href="https://github.com/OAI/learn.openapis.org/">https://github.com/OAI/learn.openapis.org/</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
